name: "Branch Guard"

on:
  workflow_call: # Esto permite que otros repos lo usen

jobs:
  enforce-branch:
    runs-on: ubuntu-latest
    steps:
      - name: Check PR Source
        run: |
          echo "Base branch: ${{ github.base_ref }}"
          echo "Head branch: ${{ github.head_ref }}"
          
          if [[ "${{ github.base_ref }}" == "main" && "${{ github.head_ref }}" != "develop" ]]; then
            echo -e "\033[31mERROR: Solo se permiten PRs a 'main' desde la rama 'develop'.\033[0m"
            exit 1
          fi
          echo -e "\033[32mValidaci√≥n exitosa.\033[0m"